{% extends 'base.html' %}
{% block content %}
  <head>
    <meta charset="UTF-8">
    <title>Route Map</title>
    <style>
       #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>
    <body>
      <div id="map"></div>
      <script>
      var map, infoWindow;

      function initMap() {
        var myLatLong = {lat:37.765, lng:-122.241 };
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 15,
          center: myLatLong
        });
        infoWindow = new google.maps.InfoWindow;

    }

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          var pos = {
            lat: position.coords.latitude,
            lng: position.coords.longitude
          };

          infoWindow.setPosition(pos);
          infoWindow.setContent('You are Here!');
          infoWindow.open(map);
          map.setCenter(pos);
        }, function() {
          handleLocationError(true, infoWindow, map.getCenter());
        });
      } else {
        handleLocationError(false, infoWindow, map.getCenter());
      }
        // marker.setPlace({
        //       placeId: place.place_id,
        //       location: place.geometry.location
        //     });
        //     marker.setVisible(true);
        //     infowindowContent.children['place-name'].textContent = place.name;
        //     infowindowContent.children['place-id'].textContent = place.place_id;
        //     infowindowContent.children['place-address'].textContent =
        //         place.formatted_address;
        //     infowindow.open(map, marker);
         

      function handleLocationError(browserHasGeolocation,  infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                    'Error: The Geolocation service failed.' :
                    'Error: Your Browser doesn\'t support geolocation.');
        infoWindow.open(map);
      }

    </script>
<form>    
    <div>
      <label>What is your destination?</label>
      <input type='text' id='destination'>
    </div>

    <div>
      <label>What time do you want to arrive?</label>
      <input type="text" id="time" class="form-control" data-format="HH:mm" data-template="HH : mm" name="arrival_time">
  </div>
  <br>
    <br>
      <input type="submit">
</form>      
    </body>
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5tDzhP-TkpUOI4dOZzkATen2OUCPasf4&callback=initMap"
        async defer></script>
  
  
  
{% endblock %}
