{% extends 'base.html' %}
{% block title %}Let's Go!{% endblock %}
{% block content %}
<head>
  <meta content="initial-scale=1.0, user-scalable=no">
<style>
#map {
  height: 400px;
}

#pac-origin-input,
#pac-destination-input {
  background-color: #fff;
  font-family: Roboto;
  font-size: 15px;
  font-weight: 300;
  margin-left: 12 px;
  padding: 0 11px 0 13px;
  width: 200px;
}

#pac-origin-input: focus,
#pac-destination-input: focus, {
  border-color: #4d90fe;
}

</style>
<script>
     var directionsDisplay;
     var directionsService = new google.maps.DirectionsService();
     var map;
     
     // var start = new google.maps.LatLng(startLatLng);
     // var end = new google.maps.LatLng(endLatLng);

      function initMap() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var myLatLong = {lat:37.765, lng:-122.241 };
        var mapOptions = {
          zoom: 15,
          mapTypeId: 'ROADMAP',
          center: myLatLong
        };
        map = new google.maps.Map(document.getElementById('map'), mapOptions);
        map.directionsDisplay.setMap(map);
        var marker = new google.maps.Marker({
          position: myLatLong, 
          map: map
        });
      
      new AutocompleteDirectionsHandler(map);
      }


    //   function AutocompleteDirectionsHandler(map) {
    //     this.map = map;
    //     this.originPlaceID = null;
    //     this.destinationPlaceID = null;
    //     this.travelMode = 'DRIVING';
    //     var originInput = document.getElementById('pac-origin-input');
    //     var destinationInput = document.getElementById('destination-input');
    //     this.directionsService = new google.maps.DirectionsService;
    //     this.directionsDisplay = new google.maps.DirectionsRenderer;
    //     // this.directionsDisplay.setMap(map);


    //     var originAutocomplete = new google.maps.places.Autocomplete(originInput, {placeIdOnly: true});
    //     var destinationAutocomplete = new google.maps.places. Autocomplete( destinationInput, {placeIdOnly: true});

    //     this.setupPlaceChangedListener(originAutocomplete, 'ORIG');
    //     this.setupPlaceChangedListener(destinationAutocomplete, 'DEST');

    //     this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(OriginInput);
    //     this.map.controls[google.maps.ControlPosition.TOP_CENTER].push(destinationInput);
    //   }
 
    //  // var infowindow;

    //   function calcRoute() {
    //     var start = document.getElementById('start').value;
    //     var end = document.getElementById('end').value;
    //     directionsService = new google.maps.DirectionsService();
    //     directionsDisplay = new google.maps.DirectionsRenderer();
    //     var request = {
    //       origin: start,
    //       destination: end,
    //       travelMode: 'DRIVING'
    //     };
    //     directionsService.route(request, function(result, status) {
    //       if (status == 'OK') {
    //         directionsDisplay.setDirections(result);
    //       }
    //     });
    //   }

    //   // Lines below have to do with the infowindow. Not an essential element of the app

    //    // var contentString = "What goes here???"
    //    // infowindow = new google.maps.InfoWindow ( {
    //    //  content: contentString
    //    //  });

    //    // var marker = new google.maps.Marker({
    //    //  position: myLatLong,
    //    //  map: map, 
    //    //  title: 'Name of this Place'
    //    //  });
    //    //  marker.addListener('click', function() {
    //    //   infowindow.open(map, marker);
    //    //  });
      
    //    var defaultBounds = new google.maps.LatLngBounds(
    //     new google.maps.LatLng(32.166, -117.246),
    //     new google.maps.LatLng(44.269, -67.678));

    //    var options = {
    //     bounds: defaultBounds
    //    };

    // AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener = function(autocomplete, mode) {
    //   var me = this;
    //   autocomplete.bindTo('bounds', this.map);
    //   autocomplete.addListener('place_changed', function() {
    //     var place = autocopmlete.getPlace();
    //     if (mode === 'ORIG') {
    //       me.originPlaceId = place.place_id;
    //     } else {
    //       me.destinationPlaceId = place.place_id;
    //     }
    //     me.route()
    //     });
    // };

    // AutocompleteDirectionsHandler.prototype.route = function() {
    //   if(!this.originPlaceId || !this.destinationPlaceId) {
    //       return;

    //   }
    //   var me = this;

    //   this.directionsService.route({
    //     origin: {'placeId': this.originPlaceId},
    //     destination: {'placeId': this.destinationPlaceId},
    //   }, function(response, status) {
    //     if(status === 'OK') {
    //       me.directionsDisplay.setDirections(response);

    //     } else {
    //       window.alert('Directions failed due to' + status);
    //     }
    //   });
    // };
     
    
</script>
<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5tDzhP-TkpUOI4dOZzkATen2OUCPasf4&libraries=places&callback=initMap"
        async defer></script>
<script src="https://code.jquery.com/jquery.js"></script> 
</head>
<body>
<form action="/map", method='GET'>
  <!-- <input id="pac-input" class="controls" type="text"
    placeholder="Start typing here">  -->     
  <span id="destination"> 
    <h1>Where are you going?</h1>
    <input  id="pac-destination-input" class="controls" type="text" placeholder="Destination?">
  </span>
  <br>
  <div id="start-address">
    <h1>What is your starting address?</h1> 
    <input id="pac-origin-input" class="controls" type="text" placeholder="Where are you starting from?">
  </div>

  <div id="map"></div>
  
  <div id="timeSelect">
    <h1>What time will you arrive?</h1>
    <input type="time" name="arrivaltime">      
  </div>
  <!-- // THERE WERE SOME NOTES ABOUT USING TIMEPICKER IN BOOTSTRAP ??   -->
    <br>
    <br>
    
  <div id="num_seats">
    <h1>How many seats do you have available? (1-6)</h1>
    <input type="number" name="seats">
  </div>
    <br>
    <br>
      <input type="submit">
</form>
</body>




<!-- displays map and a box for driver to input destination -->

<!-- pull down menu with 15 minute time increments stored as datetime objects -->

<!-- displays icons for driver to select 1-6 -->

<!-- driver inputs starting address which allows map to be generated -->






{% endblock %}